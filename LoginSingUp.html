<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login & Sing Up</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css" integrity="sha512-5Hs3dF2AEPkpNAR7UiOHba+lRSJNeM2ECkwxUIxC1Q/FLycGTbNapWXB4tP889k5T5Ju8fs4b1P5z/iB4nMfSQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=stadia_controller" />
    <link rel="stylesheet" href='styleWebsite.css' Media='all'>
    <link rel="icon" href="image/Game_IC.png">
         <meta name="google-adsense-account" content="ca-pub-5330413892781018">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-97Y58KGXPB"></script>
      <script async src="https://cdn.ampproject.org/v0.js"></script>
      <script async custom-element="amp-auto-ads"
            src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js"></script>
<script>
<script src="https://www.google.com/recaptcha/enterprise.js?render=6Ldv8okrAAAAAJcDlwcpIXDKBBtqquak5q89HQpm"></script>
    <!-- Google AdSense Auto Ads -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5330413892781018"
     crossorigin="anonymous"></script>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KDWCZN7G');</script>
     
</head>
<body>
    <div class="FormBoxLogin" id="WebsiteFormLogin">
        <div class="TopTitleAndExitForm">
        <p>Login Form</p>
        <div class="CloseForm" id="WebsiteCloseFormBTN" onclick="WebsiteCloseFormLogin()"><i class="fa-solid fa-xmark"></i></div>
        </div>
        <form id='FormLogIn'>
            <div class="BoxInputForm">
                <label for="email">Email Address:</label>
                <div class="BoxInput">
                    <div class="IC-INPUT"><i class="fa-solid fa-user"></i></div>
                    <input type="email" name="uemail" id="email" placeholder="Email Address...">
                    <div class="IC-Inupt-BTN"><i class="fa-solid fa-info"></i></div>
                </div>
            </div>
            <div class="BoxInputForm">
                <label for="Password">Password:</label>
                <div class="BoxInput">
                    <div class="IC-INPUT"><i class="fa-solid fa-key"></i></div>
                    <input type="password" name="upass" id="PasswordLogin" placeholder="Password...">
                    <div class="IC-Inupt-BTN" id="Password-BTN" onclick="PasswordLoginBTN()"><i class="fa-regular fa-eye" id="IC-Eye-Login"></i></div>
                </div>
            </div>
            <div class="ButtonForm">
            <button type="reset">Reset<i class="fa-solid fa-arrow-rotate-right"></i></button>
            <button type="submit">Login<i class="fa-regular fa-circle-right"></i></button>
        </div>
        <div class="OrLoginSingUp">
            <p>Or</p>
            <button type="button" onclick="WebsiteOpenFormSingUpBTN()">Sing Up</button>
           </div>
        </form>  
    </div>
    <div class="FormBoxSingUp" id="WebsiteFormSingUp">
        <div class="TopTitleAndExitForm">
        <p>Sing Up Form</p>
        <div class="CloseForm" id="WebsiteCloseFormBTN" onclick="WebsiteCloseFormSingUp()"><i class="fa-solid fa-xmark"></i></div>
        </div>
        <form id="FormSingUp">
            <div class="BoxInputForm">
                <label for="UserName">User Name:</label>
                <div class="BoxInput">
                    <div class="IC-INPUT"><i class="fa-solid fa-user"></i></div>
                    <input type="text" name="uname" id="UserName" placeholder="User Name...">
                    <div class="IC-Inupt-BTN"><i class="fa-solid fa-t"></i></div>
                </div>
            </div>
            <div class="BoxInputForm">
                <label for="Email">Email Address:</label>
                <div class="BoxInput">
                    <div class="IC-INPUT"><i class="fa-solid fa-massage"></i></div>
                    <input type="email" name="uemail" id="email" placeholder="Email Address...">
                    <div class="IC-Inupt-BTN"><i class="fa-solid fa-at"></i></div>
                </div>
            </div>
            <div class="BoxInputForm">
                <label for="Password">Password:</label>
                <div class="BoxInput">
                    <div class="IC-INPUT"><i class="fa-solid fa-key"></i></div>
                    <input type="password" name="upass" id="password" placeholder="Password...">
                    <div class="IC-Inupt-BTN" id="Password-BTN" onclick="PasswordSingUpBTN()"><i class="fa-regular fa-eye" id="IC-Eye-SingUp"></i></div>
                </div>
            </div>
            <div class="BoxInputForm-Gn">
                <label class="Title-Gender">Gender:</label>
                <div class="BoxInput-Gn">
                    <label class="Gn-Input">
                        <input type="radio" name="gender" value="male" id="genderMale">
                        <span class="custom-radio"></span>
                        <div class="Gn-Box">
                          <i class="fa-solid fa-male"></i>
                          <span class="LabelGender">Male</span>
                        </div>
                      </label>
                      <label class="Gn-Input">
                        <input type="radio" name="gender" value="female" id="genderFemale">
                        <span class="custom-radio"></span>
                        <div class="Gn-Box">
                          <i class="fa-solid fa-female"></i>
                          <span class="LabelGender">Female</span>
                        </div>
                      </label>
                </div>
                <p class="Text-Note">Please complete all fields to continue download.</p>
              </div>
              
            <div class="ButtonForm">
            <button type="reset">Reset<i class="fa-solid fa-arrow-rotate-right"></i></button>
            <button type="submit">Sing Up<i class="fa-regular fa-circle-right"></i></button>
        </div>
       <div class="OrLoginSingUp">
        <p>Or</p>
        <button type="button" onclick="WebsiteOpenFormLoginpBTN()">Login</button>
       </div>
        </form>
    </div>
   <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KDWCZN7G"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
        <!-- End Google Tag Manager (noscript) -->
         <div class='FooterBottom' id="WebsiteLoginSingUp-FooterBottom" style='display:none'>
            <div class='FooterInfoText'>More For You:</div>
            <a href="https://freecash.com/r/LCME1" target="_blank" class='FreeCashBTN'>
            SingUp In FreeCash & Earn Money
          <i class="fa-solid fa-coins"></i>
              </a>
            <div class='AmountUsersBTN'>Ø¹Ø¯Ø¯ Ø§Ù„Ø²ÙˆØ§Ø±: <span id="visitor-count">0</span></div>
          </div>
          <script src="JavaScript.js"></script>
    <!-- Firebase Ø§Ù„ÙƒÙˆØ¯ Ø¯Ø§Ø®Ù„ Ù…Ù„Ù HTML Ø£Ùˆ JS -->
<script type="module">

  // âœ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…ÙƒØªØ¨Ø§Øª Firebase (Ù†ÙØ³ Ø§Ù„Ù†Ø³Ø®Ø©)
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-analytics.js";
  import { getFirestore, collection, addDoc, doc, updateDoc, setDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
  import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
  import { initializeAppCheck, ReCaptchaV3Provider } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app-check.js";

  // âœ… Ø¥Ø¹Ø¯Ø§Ø¯ Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyBnA0eYHQbR8gfrkjXn0mEtwSh0MCHJpfU",
    authDomain: "thelifegamesvisitors.firebaseapp.com",
    databaseURL: "https://thelifegamesvisitors-default-rtdb.firebaseio.com",
    projectId: "thelifegamesvisitors",
    storageBucket: "thelifegamesvisitors.firebasestorage.app",
    messagingSenderId: "452655494921",
    appId: "1:452655494921:web:7a713d52f612e3724385d8",
    measurementId: "G-M0FV9P25PP"
  };

  // âœ… ØªÙ‡ÙŠØ¦Ø© Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const dbRTDB = getDatabase(app);
  const dbFS = getFirestore(app);
  const auth = getAuth(app);

  // âœ… ØªÙØ¹ÙŠÙ„ App Check (reCAPTCHA v3)
  initializeAppCheck(app, {
    provider: new ReCaptchaV3Provider('6Ldv8okrAAAAAJcDlwcpIXDKBBtqquak5q89HQpm'),
    isTokenAutoRefreshEnabled: true
  });

  // âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø²Ø§Ø¦Ø± ÙÙŠ Realtime Database
  const visitorsRef = ref(dbRTDB, 'visitors');
  push(visitorsRef, { timestamp: new Date().toISOString() });

  // âœ… Ø¹Ø±Ø¶ Ø¹Ø¯Ø¯ Ø§Ù„Ø²ÙˆØ§Ø± ÙÙŠ Ø§Ù„Ø¹Ù†ØµØ±
  window.addEventListener("DOMContentLoaded", () => {
    onValue(visitorsRef, (snapshot) => {
      const count = snapshot.exists() ? Object.keys(snapshot.val()).length : 0;
      const el = document.getElementById("visitor-count");
      if (el) el.textContent = count;
    });
  });

  // âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø²Ø§Ø¦Ø± ÙÙŠ Firestore
  (async () => {
    try {
      const res = await fetch("https://ipapi.co/json/");
      const ipData = await res.json();

      const userAgent = navigator.userAgent;
      const browser = (() => {
        if (/Edg/.test(userAgent)) return "Edge";
        if (/Chrome/.test(userAgent)) return "Chrome";
        if (/Firefox/.test(userAgent)) return "Firefox";
        if (/Safari/.test(userAgent)) return "Safari";
        return "Unknown";
      })();
      const deviceType = /Mobi|Android/i.test(userAgent) ? "ğŸ“± Ù…ÙˆØ¨Ø§ÙŠÙ„" : "ğŸ’» ÙƒÙ…Ø¨ÙŠÙˆØªØ±";

      const visitData = {
        ip: ipData.ip,
        city: ipData.city,
        region: ipData.region,
        country: ipData.country_name,
        page: window.location.pathname,
        timestamp: new Date().toISOString(),
        browser,
        device: deviceType,
        duration: 0
      };

      const docRef = await addDoc(collection(dbFS, "visitors"), visitData);
      sessionStorage.setItem("visitorDocId", docRef.id);

      const start = Date.now();
      window.addEventListener("beforeunload", async () => {
        const duration = Math.round((Date.now() - start) / 1000);
        const id = sessionStorage.getItem("visitorDocId");
        if (id) {
          await updateDoc(doc(dbFS, "visitors", id), { duration });
        }
      });

    } catch (err) {
      console.error("ğŸ”¥ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø²Ø§Ø¦Ø±:", err);
    }
  })();

  // âœ… ØªØ³Ø¬ÙŠÙ„ Ø­Ø³Ø§Ø¨
  window.addEventListener("DOMContentLoaded", () => {
    const signUpForm = document.getElementById('FormSingUp');
    const loginForm = document.getElementById('FormLogIn');
    const submitSignUp = document.getElementById('SubmitButtonSingUp');
    const submitLogin = document.getElementById('SubmitButtonLogin');

    // ğŸŸ¢ Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯
    if (submitSignUp) {
      submitSignUp.addEventListener('click', async (event) => {
        event.preventDefault();

        const email = document.getElementById('email')?.value.trim();
        const password = document.getElementById('password')?.value;
        const gender = signUpForm?.querySelector('input[name="gender"]:checked')?.value;

        if (!email || !password || !gender) {
          alert("âŒ Ù…Ù† ÙØ¶Ù„Ùƒ Ø£ÙƒÙ…Ù„ ÙƒÙ„ Ø§Ù„Ø­Ù‚ÙˆÙ„.");
          return;
        }

        try {
          const userCredential = await createUserWithEmailAndPassword(auth, email, password);
          const user = userCredential.user;

          await setDoc(doc(dbFS, "users", user.uid), {
            email,
            gender,
            createdAt: new Date().toISOString()
          });

          alert("âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­");
          window.location.href = "https://the-life-games.vercel.app/";
        } catch (error) {
          alert("âŒ " + error.message);
        }
      });
    }

    // ğŸŸ¢ ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„
    if (loginForm) {
      loginForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        const email = loginForm.querySelector('input[name="uemail"]')?.value.trim();
        const password = loginForm.querySelector('input[name="upass"]')?.value;

        if (!email || !password) {
          alert("âŒ Ù…Ù† ÙØ¶Ù„Ùƒ Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±");
          return;
        }

        try {
          const userCredential = await signInWithEmailAndPassword(auth, email, password);
          alert("âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­");
          window.location.href = "https://the-life-games.vercel.app/";
        } catch (error) {
          alert("âŒ " + error.message);
        }
      });
    }
  });

</script>

      
</body>
</html>
